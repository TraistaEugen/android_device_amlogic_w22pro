--- libavformat/allformats.c
+++ libavformat/allformats.c
@@ -241,6 +241,7 @@
     REGISTER_PROTOCOL (FILE, file);
     REGISTER_PROTOCOL (GOPHER, gopher);
     REGISTER_PROTOCOL (HTTP, http);
+	REGISTER_PROTOCOL (HTTP, shttp);
     REGISTER_PROTOCOL (MMSH, mmsh);
     REGISTER_PROTOCOL (MMST, mmst);
     REGISTER_PROTOCOL (MD5,  md5);
@@ -255,4 +256,8 @@
     REGISTER_PROTOCOL (RTP, rtp);
     REGISTER_PROTOCOL (TCP, tcp);
     REGISTER_PROTOCOL (UDP, udp);
+
+
+extern int register_list_demux_all(void);
+	register_list_demux_all();
 }
